!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3)}([function(e,t){e.exports="<div id=\"div-contenedor\" class=\"m-control m-container m-munpanel\">\n    <div id='buscador-panel'>\n        <div id='buscador-panel-title'>Buscador de Municipios</div>\n        <div id='buscador-panel-body'>\n            <div id='content-panel'>\n                <h3 class='tituloSelect'>Representación Gráfica</h3>\n                <select name='representacion' id='selectRepresentacion'>\n                    <option class='opRepresentacion' value='Provincias' selected>Provincias</option>\n                    <option class='opRepresentacion' value='Poblacion'>Población</option>\n                    <option class='opRepresentacion' value='Deficit_Superavit'>Déficit/Superávit</option>\n                    <option class='opRepresentacion' value='Afiliacion'>Afiliación Seg. Social</option>\n\n                </select>\n                <h3 class='tituloSelect'>Provincias</h3>\n                <select name='provincias' id='selectProvincias'>\n                    <option class='opProvincias' value='Select' disabled='disabled' selected>Selecciona una\n                        provincia</option>\n                    <option class='opProvincias' value='Almeria'>Almería</option>\n                    <option class='opProvincias' value='Cadiz'>Cádiz</option>\n                    <option class='opProvincias' value='Cordoba'>Córdoba</option>\n                    <option class='opProvincias' value='Granada'>Granada</option>\n                    <option class='opProvincias' value='Huelva'>Huelva</option>\n                    <option class='opProvincias' value='Jaen'>Jaén</option>\n                    <option class='opProvincias' value='Malaga'>Málaga</option>\n                    <option class='opProvincias' value='Sevilla'>Sevilla</option>\n                    <option class='opProvincias' value='Todas'>Todas</option>\n                </select>\n                <h3 class='tituloSelect'>Municipios</h3>\n                <select name='municipios' id='selectMunicipios'>\n                    <option class='opMunicipios' value='Select' disabled='disabled' selected>Selecciona un\n                        municipio</option>\n\n                </select>\n\n                <hr>\n\n\n\n                <h3 class='tituloSelect'>Datos de Población</h3>\n                <label id='year'>Año\n                    <select name='poblacion' id='selectPoblacion'>\n                        <option class='opPoblacion' value='' selected></option>\n                        <option class='opPoblacion' value='2020'>2020</option>\n                        <option class='opPoblacion' value='2019'>2019</option>\n                        <option class='opPoblacion' value='2018'>2018</option>\n                        <option class='opPoblacion' value='2017'>2017</option>\n                        <option class='opPoblacion' value='2016'>2016</option>\n                        <option class='opPoblacion' value='2015'>2015</option>\n                        <option class='opPoblacion' value='2014'>2014</option>\n                        <option class='opPoblacion' value='2013'>2013</option>\n                        <option class='opPoblacion' value='2012'>2012</option>\n                        <option class='opPoblacion' value='2011'>2011</option>\n                        <option class='opPoblacion' value='2010'>2010</option>\n                        <option class='opPoblacion' value='2009'>2009</option>\n                        <option class='opPoblacion' value='2008'>2008</option>\n                        <option class='opPoblacion' value='2007'>2007</option>\n                        <option class='opPoblacion' value='2006'>2006</option>\n                        <option class='opPoblacion' value='2005'>2005</option>\n                        <option class='opPoblacion' value='2004'>2004</option>\n                        <option class='opPoblacion' value='2003'>2003</option>\n                        <option class='opPoblacion' value='2002'>2002</option>\n                        <option class='opPoblacion' value='2001'>2001</option>\n                        <option class='opPoblacion' value='2000'>2000</option>\n                        <option class='opPoblacion' value='1999'>1999</option>\n                        <option class='opPoblacion' value='1998'>1998</option>\n                        <option class='opPoblacion' value='1996'>1996</option>\n                    </select>\n                </label>\n\n                <div id='divSuperavit'>\n                    <label><input type=\"checkbox\" id=\"checkSuperavit\" value=\"Superavit\">\n                        Datos Superávit/Déficit último ejercicio</label>\n                </div>\n\n\n                <h3 class='tituloSelect' id='tituloSS'>Datos Afiliación Seg. Social</h3>\n                <select name='regimenAfiliacion' id='selectRegimenAfiliacion'>\n                    <option class='opRegimenAfiliacion' value='' selected></option>\n                    <option class='opRegimenAfiliacion' value='Régimen General* y Carbón'>Régimen General y Carbón\n                    </option>\n                    <option class='opRegimenAfiliacion' value='Sistema Especial Agrario'>Sistema Especial Agrario\n                    </option>\n                    <option class='opRegimenAfiliacion' value='Régimen Especial Trabajadores Autónomos'>Régimen Especial\n                        Trabajadores Autónomos</option>\n                    <option class='opRegimenAfiliacion' value='Régimen Especial del Mar'>Régimen Especial del Mar\n                    </option>\n                    <option class='opRegimenAfiliacion'\n                        value='Régimen Especial Empleados del Hogar y R.G. Sistema Especial de Empleados del Hogar'>\n                        Régimen Especial y Sistema Especial de Empleados del Hogar</option>\n                </select>\n\n                <select name='sexoAfiliacion' id='selectSexoAfiliacion'>\n                    <option class='opSexoAfiliacion' value='' selected></option>\n                    <option class='opSexoAfiliacion' value='Hombres'>Hombres</option>\n                    <option class='opSexoAfiliacion' value='Mujeres'>Mujeres</option>\n                    <option class='opSexoAfiliacion' value='Ambos sexos'>Total</option>\n                    <option class='opSexoAfiliacion' value='Ambos sexos disgregados'>Ambos</option>\n                </select>\n                <p id='controlCarga'>Cargando datos</p>\n                <hr>\n\n                <h3 class='tituloSelect'>Buscador de Municipios</h3>\n                <form id='buscaMunicipio'>\n                    <label for='busMuni'>Municipio</label>\n                    <input type='text' id='busMuni' name='municipio' autocomplete='off'>\n                </form>\n                <div id='divBotones'>\n                    <button id='botonBusca' title='Busca un Municipio'>Busca</button>\n                    <button id='botonLimpia' title='Limpia campos'>Limpia</button>\n                </div>\n                <div id='DivTablaResultados'>\n                    <table id='TablaResultados' class='TablaOculta'>\n                        <thead>\n                            <tr>\n                                <td>MUNICIPIO</td>\n                                <td>PROVINCIA</td>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        </tbody>\n                    </table>\n                </div>\n                <div id='controlTablas'>\n                    <button id='botonAtras' title='Anterior' class='g-cartografia-flecha-izquierda'></button>\n                    <button id='botonAvance' title='Siguiente' class='g-cartografia-flecha-derecha'></button>\n                </div>\n                <p id='paginado'>datos de busqueda</p>\n                <div id='resultadosBusqueda'>\n                    <p id='resulBus'>RESULTADO BUSQUEDA</p>\n                </div>               \n            </div>\n        </div>\n    </div>\n</div>"},function(e){e.exports=JSON.parse('{"url":{"name":"Munpanel","separator":"*"},"constructor":"M.plugin.Munpanel","parameters":[],"files":{"ol":{"scripts":[],"styles":[]}},"metadata":{"uuid_plugin":"","uuid_version_plugin":"","version_ficha_metadatos":"","name":"Munpanel","description":"Description of the plugin","text":"A full text about plugin","version":"1.0.0","date":"","author":"","org":"","tags":"mapea,plugin","icon":"./facade/assets/icons/icons.svg","buttons":[{"title":"","description":"","querySelector":""},{"title":"","description":"","querySelector":""}],"dependencies":{"modules":["",""],"plugins":[{"uuid":"","name":""}],"services":[{"name":"","description":""}]},"compatibility":["6.0.0"]}}')},function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(2);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,i){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=u(e);if(t){var n=u(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return r(this,i)}}function r(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(g,M.impl.Control);var t,i,o,r=l(g);function g(){return n(this,g),r.apply(this,arguments)}return t=g,(i=[{key:"addTo",value:function(e,t){var i=this;e.getMapImpl().getInteractions().forEach((function(e){e instanceof ol.interaction.DoubleClickZoom&&(i.dblClickInteraction_=e)})),a(u(g.prototype),"addTo",this).call(this,e,t)}},{key:"activateClick",value:function(e){this.dblClickInteraction_.setActive(!1),e.getMapImpl().on("dblclick",(function(t){var i=new CustomEvent("mapclicked",{detail:t.coordinate,bubbles:!0});e.getContainer().dispatchEvent(i)}))}},{key:"deactivateClick",value:function(e){this.dblClickInteraction_.setActive(!0),e.getMapImpl().removeEventListener("dblclick")}}])&&s(t.prototype,i),o&&s(t,o),g}(),f=i(0),d=i.n(f);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t,i){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=b(e);if(t){var n=b(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return S(this,i)}}function S(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(s,M.Control);var t,i,o,n=v(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),M.utils.isUndefined(g)&&M.exception("La implementación usada no puede crear controles MunpanelControl");var i=new g;return(t=n.call(this,i,"Munpanel")).config=e,t}return t=s,(i=[{key:"createView",value:function(e){var t=this;return new Promise((function(e,i){var o=M.template.compileSync(d.a);t.addEvents(o),e(o)}))}},{key:"addEvents",value:function(e){var t=this,i=e.querySelectorAll("select#selectProvincias")[0],o=e.querySelectorAll("select#selectMunicipios")[0],n=e.querySelectorAll("form#buscaMunicipio")[0],s=e.querySelectorAll("button#botonBusca")[0],a=e.querySelectorAll("button#botonLimpia")[0],c=e.querySelectorAll("button#botonAtras")[0],l=e.querySelectorAll("button#botonAvance")[0],r=e.querySelectorAll("table#TablaResultados")[0],u=e.querySelectorAll("select#selectPoblacion")[0],g=e.querySelectorAll("select#selectRegimenAfiliacion")[0],f=e.querySelectorAll("select#selectSexoAfiliacion")[0],d=e.querySelectorAll("input#checkSuperavit")[0],p=e.querySelectorAll("select#selectRepresentacion")[0];this.map_.on(M.evt.COMPLETED,(function(){document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls")[0].innerHTML="<div id='leyenda-title'></div><div class='leyenda'></div>",document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls>div#leyenda-title")[0].innerHTML="Municipios por Provincias",document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls>div.leyenda")[0].innerHTML='<img src="../../../leyendas/provincias.png" alt="Leyenda Provincias" title ="Leyenda Provincias" >',i.addEventListener("change",(function(){var e=i.value;t.limpia(),t.muestraProvincia(e)})),o.addEventListener("change",(function(){var e=i.value,n=o.value;t.seleccionaMunicipio(e,n)})),p.addEventListener("change",(function(){if(""!=t.config.selectedFeature&&t.map_.getFeatureHandler().unselectFeatures([t.config.selectedFeature],t.config.selectedProv,{}),t.map_.getPopup()&&t.map_.removePopup(),"Provincias"==p.value){t.config.stAnterior=!1,t.config.munAnterior=!1;for(var e=0;e<t.config.layerList.length;e++)t.config.layerList[e].setStyle(t.config.styleList[e]);document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls")[0].innerHTML="<div id='leyenda-title'></div><div class='leyenda'></div>",document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls>div#leyenda-title")[0].innerHTML="Municipios por Provincias",document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls>div.leyenda")[0].innerHTML='<img src="../../../leyendas/provincias.png" alt="Leyenda Provincias" title ="Leyenda Provincias" >'}if("Poblacion"==p.value)if(""==u.value&&(u.item(1).selected="selected"),t.config.stAnterior=!1,t.config.munAnterior=!1,t.config.pobYear=u.value,""==t.config.status.PoblacionJson)document.getElementById("controlCarga").style.display="block",f.style.marginBottom="0px",t.consultaPoblacion(t.config.pobYear);else{for(var i=0,o=0;o<t.config.status.PoblacionJson.data.length;o++)t.config.status.PoblacionJson.data[o][1].des==t.config.pobYear&&(t.config.listPoblacion[2*i]=t.config.status.PoblacionJson.data[o][0].des,t.config.listPoblacion[2*i+1]=t.config.status.PoblacionJson.data[o][3].format,i+=1);t.config.listPoblacion=t.normalizaMunicipio(t.config.listPoblacion),"Poblacion"==document.getElementById("selectRepresentacion").value&&t.representaPoblacion()}if("Deficit_Superavit"==p.value)if(d.checked=!0,t.config.stAnterior=!1,t.config.munAnterior=!1,""==t.config.status.SuperavitJson)document.getElementById("controlCarga").style.display="block",f.style.marginBottom="0px",t.consultaSuperavit();else{for(var n=0;n<t.config.status.SuperavitJson.data.length;n++)t.config.listSuperavit[2*n]=t.config.status.SuperavitJson.data[n][0].des,t.config.listSuperavit[2*n+1]=parseFloat(t.config.status.SuperavitJson.data[n][2].val).toFixed(2);t.config.listSuperavit=t.normalizaMunicipio(t.config.listSuperavit),"Deficit_Superavit"==document.getElementById("selectRepresentacion").value&&t.representaSuperavit()}if("Afiliacion"==p.value)if(""==g.value&&(g.item(1).selected="selected"),""==f.value&&(f.item(1).selected="selected"),t.config.stAnterior=!1,t.config.munAnterior=!1,t.config.ssRegimen=g.value,t.config.ssSexo=f.value,""==t.config.status.SegsocialJson)document.getElementById("controlCarga").style.display="block",f.style.marginBottom="0px",t.consultaSegSocial(t.config.ssRegimen,t.config.ssSexo);else{var s=0;if(t.config.ssYear=t.config.status.SegsocialJson.data[0][3].des,document.getElementById("tituloSS").innerHTML="Afiliación Seg. Social "+t.config.ssYear,"Ambos sexos disgregados"!=t.config.ssSexo)for(var a=0;a<t.config.status.SegsocialJson.data.length;a++)t.config.status.SegsocialJson.data[a][1].des==t.config.ssRegimen&&t.config.status.SegsocialJson.data[a][2].des==t.config.ssSexo&&(t.config.listSegsocial[2*s]=t.config.status.SegsocialJson.data[a][0].des,"*"!=t.config.status.SegsocialJson.data[a][4].format&&""!=t.config.status.SegsocialJson.data[a][4].format&&(t.config.listSegsocial[2*s+1]=t.config.status.SegsocialJson.data[a][4].format),"*"==t.config.status.SegsocialJson.data[a][4].format&&(t.config.listSegsocial[2*s+1]="< 5"),""==t.config.status.SegsocialJson.data[a][4].format&&(t.config.listSegsocial[2*s+1]="---"),s+=1);if("Ambos sexos disgregados"==t.config.ssSexo){s=0;for(var c=0;c<t.config.status.SegsocialJson.data.length;c++)t.config.status.SegsocialJson.data[c][1].des==t.config.ssRegimen&&"Hombres"==t.config.status.SegsocialJson.data[c][2].des&&(t.config.listSegsocial[s]=t.config.status.SegsocialJson.data[c][0].des,s+=1,t.config.listSegsocial[s]=t.config.status.SegsocialJson.data[c][4].format,"*"==t.config.listSegsocial[s]&&(t.config.listSegsocial[s]="< 5"),""==t.config.listSegsocial[s]&&(t.config.listSegsocial[s]="---"),s+=1,t.config.listSegsocial[s]=t.config.status.SegsocialJson.data[c+1][4].format,"*"==t.config.listSegsocial[s]&&(t.config.listSegsocial[s]="< 5"),""==t.config.listSegsocial[s]&&(t.config.listSegsocial[s]="---"),s+=1,t.config.listSegsocial[s]=t.config.status.SegsocialJson.data[c+2][4].format,"*"==t.config.listSegsocial[s]&&(t.config.listSegsocial[s]="< 5"),""==t.config.listSegsocial[s]&&(t.config.listSegsocial[s]="---"),s+=1)}t.config.listSegsocial=t.normalizaMunicipio(t.config.listSegsocial),"Afiliacion"==document.getElementById("selectRepresentacion").value&&t.representaSegSocial()}})),u.addEventListener("change",(function(){""!=t.config.selectedFeature&&t.map_.getFeatureHandler().unselectFeatures([t.config.selectedFeature],t.config.selectedProv,{}),t.map_.getPopup()&&t.map_.removePopup(),0!=t.config.munAnterior&&t.config.munAnterior.setStyle(t.config.stAnterior),f.style.marginBottom="0px",t.config.stAnterior=!1,t.config.munAnterior=!1,o.item(0).selected="selected",""!=u.value?(t.config.status.opcPoblacion=!0,""==t.config.status.PoblacionJson?document.getElementById("controlCarga").style.display="block":document.getElementById("selectSexoAfiliacion").style.marginBottom="27px",t.config.pobYear=u.value,t.consultaPoblacion(t.config.pobYear)):(t.config.status.opcPoblacion=!1,document.getElementById("selectSexoAfiliacion").style.marginBottom="27px",t.config.pobYear=u.value)})),g.addEventListener("change",(function(){""!=t.config.selectedFeature&&t.map_.getFeatureHandler().unselectFeatures([t.config.selectedFeature],t.config.selectedProv,{}),t.map_.getPopup()&&t.map_.removePopup(),0!=t.config.munAnterior&&t.config.munAnterior.setStyle(t.config.stAnterior),f.style.marginBottom="0px",t.config.stAnterior=!1,t.config.munAnterior=!1,o.item(0).selected="selected",""!=g.value?(t.config.status.opcSegsocial=!0,""==t.config.status.SegsocialJson?document.getElementById("controlCarga").style.display="block":document.getElementById("selectSexoAfiliacion").style.marginBottom="27px",""==f.value&&(f.item(1).selected="selected"),t.config.ssRegimen=g.value,t.config.ssSexo=f.value,t.config.listSegsocial=[],t.consultaSegSocial(t.config.ssRegimen,t.config.ssSexo)):(f.item(0).selected="selected",document.getElementById("selectSexoAfiliacion").style.marginBottom="27px"),""!=g.value&&""!=f.value||(t.config.status.opcSegsocial="false")})),f.addEventListener("change",(function(){""!=t.config.selectedFeature&&t.map_.getFeatureHandler().unselectFeatures([t.config.selectedFeature],t.config.selectedProv,{}),t.map_.getPopup()&&t.map_.removePopup(),0!=t.config.munAnterior&&t.config.munAnterior.setStyle(t.config.stAnterior),f.style.marginBottom="0px",t.config.stAnterior=!1,t.config.munAnterior=!1,o.item(0).selected="selected",""!=f.value?(t.config.status.opcSegsocial=!0,""==t.config.status.SegsocialJson?document.getElementById("controlCarga").style.display="block":document.getElementById("selectSexoAfiliacion").style.marginBottom="27px",""==g.value&&(g.item(1).selected="selected"),t.config.ssRegimen=g.value,t.config.ssSexo=f.value,t.config.listSegsocial=[],t.consultaSegSocial(t.config.ssRegimen,t.config.ssSexo)):(g.item(0).selected="selected",document.getElementById("selectSexoAfiliacion").style.marginBottom="27px"),""!=g.value&&""!=f.value||(t.config.status.opcSegsocial="false")})),d.addEventListener("change",(function(){if(""!=t.config.selectedFeature&&t.map_.getFeatureHandler().unselectFeatures([t.config.selectedFeature],t.config.selectedProv,{}),t.map_.getPopup()&&t.map_.removePopup(),o.item(0).selected="selected",0!=t.config.munAnterior&&t.config.munAnterior.setStyle(t.config.stAnterior),d.checked)if(""==t.config.status.SuperavitJson)f.style.marginBottom="0px",document.getElementById("controlCarga").style.display="block",t.config.status.opcSuperavit=!0,t.consultaSuperavit();else{for(var e=0;e<t.config.status.SuperavitJson.data.length;e++)t.config.listSuperavit[2*e]=t.config.status.SuperavitJson.data[e][0].des,t.config.listSuperavit[2*e+1]=parseFloat(t.config.status.SuperavitJson.data[e][2].val).toFixed(2);t.config.listSuperavit=t.normalizaMunicipio(t.config.listSuperavit),"Deficit_Superavit"==document.getElementById("selectRepresentacion").value&&t.representaSuperavit(),t.config.status.opcSuperavit=!0}else t.config.status.opcSuperavit=!1})),n.addEventListener("keydown",(function(e){t.muestraBotones(),13===e.keyCode&&document.getElementById("botonBusca").focus()})),s.addEventListener("click",(function(){t.config.pag=0,t.config.reg=0,t.config.result=[],t.listaMunicipios()})),a.addEventListener("click",(function(){t.limpia()})),c.addEventListener("click",(function(){t.retrocedeTabla()})),l.addEventListener("click",(function(){t.avanzaTabla()})),r.addEventListener("click",(function(e){var i=e.target.parentElement.rowIndex,o=document.getElementById("TablaResultados").rows[i].cells[0].innerText,n=document.getElementById("TablaResultados").rows[i].cells[1].innerText;t.muestraProvincia(n),t.buscaMunicipio(o,n)})),t.map_.getPanels("legend")[0].on(M.evt.SHOW,(function(){0==t.map_.getPanels("panelMunpanel")[0]._collapsed&&t.map_.getPanels("panelMunpanel")[0].collapse()})),t.map_.getPanels("panelMunpanel")[0].on(M.evt.SHOW,(function(){0==t.map_.getPanels("legend")[0]._collapsed&&t.map_.getPanels("legend")[0].collapse()}));for(var e=function(e){t.config.layerList[e].on(M.evt.SELECT_FEATURES,(function(i){i[0]instanceof M.ClusteredFeature||(0!=t.config.munAnterior&&t.config.munAnterior.setStyle(t.config.stAnterior),t.config.selectedFeature=i[0],t.config.selectedProv=t.config.layerList[e],t.config.munAnterior=t.config.selectedFeature,t.config.stAnterior=t.config.munAnterior.getStyle(),document.getElementById("paginado").style.display="none",t.borraTablas(),t.config.pag=0,t.config.reg=0,t.config.result=[],document.getElementById("busMuni").value="",document.getElementById("divBotones").style.display="none",document.getElementById("resultadosBusqueda").style.display="none",document.getElementById("controlTablas").style.display="none",document.getElementById("resulBus").innerHTML="",document.getElementById("selectMunicipios").options.item(0).selected="selected",t.config.provinciaSeleccionada=t.quitaAcentos(i[0].getAttribute("provincia")),t.config.munSelect=i[0].getAttribute("nombre"),t.seleccionaMunicipio(t.config.provinciaSeleccionada,t.config.munSelect),"Select"==document.querySelectorAll("select#selectProvincias")[0].value&&(document.querySelectorAll("select#selectProvincias")[0].value="Todas",t.creaSelect("Todas"),t.cambiaSelect(t.config.munSelect)))}))},m=0;m<t.config.layerList.length;m++)e(m)}))}},{key:"activate",value:function(){h(b(s.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){h(b(s.prototype),"deactivate",this).call(this)}},{key:"getActivationButton",value:function(e){return e.querySelector(".m-munpanel button")}},{key:"equals",value:function(e){return e instanceof s}},{key:"muestraProvincia",value:function(e){this.map_.getPopup()&&this.map_.removePopup();for(var t=this.map_.getLayers(),i=0;i<t.length;i++)t[i].zindex_>1e4&&t[i].zindex_<10990&&this.map_.removeLayers(t[i]);for(var o=0;o<document.getElementById("selectProvincias").options.length;o++)document.getElementById("selectProvincias").options[o].value==e&&(this.config.provinciaSeleccionada=document.getElementById("selectProvincias").options[o].value,document.getElementById("selectProvincias").options[o].selected="selected",this.creaSelect(e));for(var n=0;n<this.config.layerList.length;n++)if(this.config.layerList[n].getImpl().displayInLayerSwitcher=!1,"Todas"!=e)this.config.layerList[n].getImpl().name==e&&(this.config.layerList[n].getImpl().displayInLayerSwitcher=!0,this.map_.addLayers(this.config.layerList[n]),this.map_.setBbox(this.config.layerList[n].getMaxExtent()));else for(var s=0;s<this.config.layerList.length;s++)this.config.layerList[n].getImpl().displayInLayerSwitcher=!0,this.map_.addLayers(this.config.layerList[n]),this.map_.setBbox(this.map_.getMaxExtent());"Poblacion"==document.getElementById("selectRepresentacion").value&&this.representaPoblacion(),"Deficit_Superavit"==document.getElementById("selectRepresentacion").value&&this.representaSuperavit(),"Afiliacion"==document.getElementById("selectRepresentacion").value&&this.representaSegSocial()}},{key:"creaSelect",value:function(e){for(var t=document.querySelectorAll(".opMunicipios"),i=document.querySelectorAll(".opMunicipiosProv"),o=document.getElementById("selectMunicipios"),n=document.createElement("option"),s=document.createTextNode("Selecciona un municipio"),a=0;a<t.length;a++)o.removeChild(t[a]);for(var c=0;c<i.length;c++)o.removeChild(i[c]);if((n=document.createElement("option")).setAttribute("value","Select"),n.setAttribute("class","opMunicipios"),n.setAttribute("disabled","disabled"),n.setAttribute("selected","selected"),s=document.createTextNode("Selecciona un municipio"),n.appendChild(s),o.appendChild(n),"Todas"!=e){for(var l=0;l<this.config.layerList.length;l++)if(e==this.config.layerList[l].getImpl().name)for(var r=0;r<this.config.layerList[l].getFeatures().length;r++)(n=document.createElement("option")).setAttribute("value",this.config.layerList[l].getFeatures()[r].impl_.olFeature_.values_.nombre),n.setAttribute("class","opMunicipios"),s=document.createTextNode(this.config.layerList[l].getFeatures()[r].impl_.olFeature_.values_.nombre),n.appendChild(s),o.appendChild(n)}else for(var u=0;u<this.config.layerList.length;u++){(n=document.createElement("option")).setAttribute("value",this.config.layerList[u].getImpl().name),n.setAttribute("class","opMunicipiosProv"),n.setAttribute("disabled","disabled"),s=document.createTextNode("          ------"+this.config.layerList[u].getImpl().name.toUpperCase()+"------"),n.appendChild(s),o.appendChild(n);for(var g=0;g<this.config.layerList[u].getFeatures().length;g++)(n=document.createElement("option")).setAttribute("value",this.config.layerList[u].getFeatures()[g].impl_.olFeature_.values_.nombre),n.setAttribute("class","opMunicipios"),s=document.createTextNode(this.config.layerList[u].getFeatures()[g].impl_.olFeature_.values_.nombre),n.appendChild(s),o.appendChild(n)}o.value="Select"}},{key:"seleccionaMunicipio",value:function(e,t){this.map_.getPopup()&&this.map_.removePopup();var i=!0;this.config.status.opcPoblacion&&(this.config.status.stPoblacion||(i=!1)),this.config.status.opcSuperavit&&(this.config.status.stSuperavit||(i=!1)),this.config.status.opcSegsocial&&(this.config.status.stSegsocial||(i=!1)),i&&this.buscaMunicipio(t,e)}},{key:"buscaMunicipio",value:function(e,t){for(var i,o=!1,n=0;n<this.config.listPoblacion.length;n++)this.config.listPoblacion[n]==e&&(this.config.pobSelect=this.config.listPoblacion[n+1]+" hab.",o=!0);(0==o||this.config.pobSelect.length<6)&&(this.config.pobSelect="---"),o=!1;for(var s=0;s<this.config.listSuperavit.length;s++)this.config.listSuperavit[s]==e&&(this.config.superavit=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(this.config.listSuperavit[s+1]),o=!0);if((0==o||this.config.superavit.length<3)&&(this.config.superavit="---"),o=!1,"Hombres"==this.config.ssSexo){for(var a=0;a<this.config.listSegsocial.length;a++)this.config.listSegsocial[a]==e&&(this.config.ssHombres=this.config.listSegsocial[a+1],o=!0);0==o&&(this.config.ssHombres="---")}if("Mujeres"==this.config.ssSexo){for(var c=0;c<this.config.listSegsocial.length;c++)this.config.listSegsocial[c]==e&&(this.config.ssMujeres=this.config.listSegsocial[c+1],o=!0);0==o&&(this.config.ssMujeres="---")}if("Ambos sexos"==this.config.ssSexo){for(var l=0;l<this.config.listSegsocial.length;l++)this.config.listSegsocial[l]==e&&(this.config.ssAmbos=this.config.listSegsocial[l+1],o=!0);0==o&&(this.config.ssAmbos="---")}if("Ambos sexos disgregados"==this.config.ssSexo){for(var r=0;r<this.config.listSegsocial.length;r++)this.config.listSegsocial[r]==e&&(this.config.ssHombres=this.config.listSegsocial[r+1],this.config.ssMujeres=this.config.listSegsocial[r+2],this.config.ssAmbos=this.config.listSegsocial[r+3],o=!0);0==o&&(this.config.ssHombres="---",this.config.ssMujeres="---",this.config.ssAmbos="---")}for(var u=0;u<this.config.layerList.length;u++)if(this.config.layerList[u].getImpl().name==t||"Todas"==t)for(var g=0;g<this.config.layerList[u].getFeatures().length;g++)if(this.config.layerList[u].getFeatures()[g].getImpl().getAttribute("nombre")==e){i=this.config.layerList[u].getFeatures()[g],this.config.munSelect=e,0!=this.config.munAnterior&&this.config.munAnterior.setStyle(this.config.stAnterior),this.config.selectedFeature=i,this.config.selectedProv=this.config.layerList[u],this.config.munAnterior=i,this.config.stAnterior=i.getStyle(),i.setStyle(new M.style.Polygon({fill:{color:"#8d8d8d",opacity:.5},stroke:{color:"#ff0000",width:3}}));var f=this.createPopupFeature(this.centroide(i));f[2].addTab(this.popupTabContent(t,i)),this.addPopupFeature(f[2],f[0],f[1]),this.map_.setCenter({x:this.centroide(i)[0],y:this.centroide(i)[1],draw:!1}),this.cambiaSelect(e)}}},{key:"createPopupFeature",value:function(e){return[e,this.map_.getZoom(),new M.Popup]}},{key:"addPopupFeature",value:function(e,t,i){var o=this;this.map_.addPopup(e,t),this.map_.setZoom(i),document.querySelectorAll("div.m-content")[0].className="pop_feat",document.querySelectorAll("a.m-popup-closer")[0].addEventListener("click",(function(){o.config.munAnterior.setStyle(o.config.stAnterior),document.querySelectorAll("select#selectMunicipios")[0].value="Select",o.map_.getFeatureHandler().unselectFeatures([o.config.selectedFeature],o.config.selectedProv,{}),o.config.selectedFeature="",o.config.selectedProv=""}))}},{key:"popupTabContent",value:function(e,t){var i=t.getAttribute("nombre"),o=t.getAttribute("cod_mun"),n=this.superficieMunicipio(t)[0],s=this.superficieMunicipio(t)[1],a="---",c="",l="",r="";return"---"!=this.config.pobSelect&&(a=(a=(parseFloat(this.config.pobSelect)/n).toFixed(2)).replace(".",",")+" hab./Km²"),1==this.config.status.opcSegsocial&&("Hombres"==this.config.ssSexo&&(c='<table class="list_feat"><caption>Afiliación Seg. Social '+this.config.ssYear+'</caption><tr><th colspan="2">'+this.config.ssRegimen.replace("*","")+"</th></tr><tr><th>Hombres</th><td>"+this.config.ssHombres+"</td></tr></table>"),"Mujeres"==this.config.ssSexo&&(c='<table class="list_feat"><caption>Afiliación Seg. Social '+this.config.ssYear+'</caption><tr><th colspan="2">'+this.config.ssRegimen.replace("*","")+"</th></tr><tr><th>Mujeres</th><td>"+this.config.ssMujeres+"</td></tr></table>"),"Ambos sexos"==this.config.ssSexo&&(c='<table class="list_feat"><caption>Afiliación Seg. Social '+this.config.ssYear+'</caption><tr><th colspan="2">'+this.config.ssRegimen.replace("*","")+"</th></tr><tr><th>Ambos sexos</th><td>"+this.config.ssAmbos+"</td></tr></table>"),"Ambos sexos disgregados"==this.config.ssSexo&&(c='<table class="list_feat"><caption>Afiliación Seg. Social '+this.config.ssYear+'</caption><tr><th colspan="2">'+this.config.ssRegimen.replace("*","")+"</th></tr><tr><th>Hombres</th><td>"+this.config.ssHombres+"</td></tr><tr><th>Mujeres</th><td>"+this.config.ssMujeres+"</td></tr><tr><th>Ambos sexos</th><td>"+this.config.ssAmbos+"</td></tr></table>")),""!=this.config.pobYear&&(l="<tr><th>Población año "+this.config.pobYear+" </th><td>"+this.config.pobSelect+"</td></tr><tr><th>Densidad de población año "+this.config.pobYear+" </th><td>"+a+"</td></tr><tr></tr>"),document.getElementById("checkSuperavit").checked&&(r="<tr><th>Superávit/Déficit <br> último ejercicio</th><td>"+this.config.superavit+"</td></tr>"),{icon:"g-cartografia-pin",title:"Municipio de "+e,content:'<div style="text-align: center"><table class="list_feat"><tr><th> Nombre </th><td>'+i+"</td></tr><tr><th>Codigo municipio </th><td>"+o+"</td></tr><tr><th>Superficie</th><td>"+n+" Km²</td></tr></tr><tr><th>Perímetro</th><td>"+s+" Km</td></tr>"+l+"</td></tr>"+r+"</table>"+c+"</div>"}}},{key:"centroide",value:function(e){for(var t=[0,0],i=[],o=0;o<e.getGeometry().coordinates.length;o++)for(var n=0;n<e.getGeometry().coordinates[o][0].length-1;n++)i=i.concat(e.getGeometry().coordinates[o][0][n]);for(var s=0;s<i.length/2;s++)t[0]=t[0]+i[2*s],t[1]=t[1]+i[2*s+1];return t[0]=t[0]/(i.length/2),t[1]=t[1]/(i.length/2),t}},{key:"superficieMunicipio",value:function(e){for(var t=0,i=0,o=0;o<e.getGeometry().coordinates.length;o++){for(var n=[],s=0;s<e.getGeometry().coordinates[o][0].length;s++)n=n.concat(e.getGeometry().coordinates[o][0][s]);for(var a=0;a<n.length/2-1;a++)t=t+(n[2*a+2]-n[2*a])*n[2*a+1]+(n[2*a+2]-n[2*a])*(n[2*a+3]-n[2*a+1])/2,i+=Math.sqrt((n[2*a+2]-n[2*a])*(n[2*a+2]-n[2*a])+(n[2*a+3]-n[2*a+1])*(n[2*a+3]-n[2*a+1]))}return[t=(t=Math.round(t)/1e6).toFixed(2),i=(i=Math.round(i)/1e3).toFixed(2)]}},{key:"cambiaSelect",value:function(e){for(var t=0;t<document.getElementById("selectMunicipios").length;t++)document.getElementById("selectMunicipios").options[t].innerText==e&&(document.getElementById("selectMunicipios").options.item(t).selected="selected")}},{key:"muestraBotones",value:function(){document.getElementById("divBotones").style.display="flex"}},{key:"listaMunicipios",value:function(){this.borraTablas();var e=document.getElementById("busMuni").value,t=e,i=!1;document.getElementById("resultadosBusqueda").style.display="none",document.getElementById("resulBus").innerHTML="",this.config.provinciaSeleccionada=document.getElementById("selectProvincias").value,document.getElementById("DivTablaResultados").style.display="block",e=e.toLowerCase();for(var o=(e=this.quitaAcentos(e)).split(" "),n=0;n<o.length;n++)"de"!=o[n]&&"del"!=o[n]&&"la"!=o[n]&&"los"!=o[n]&&"las"!=o[n]&&(o[n]=o[n][0].toUpperCase()+o[n].slice(1));e="";for(var s=0;s<o.length;s++)e+=o[s],s<o.length-1&&(e+=" ");o=(e=e[0].toUpperCase()+e.slice(1)).split(" ");for(var a=0;a<o.length;a++)"de"!=o[a]&&"del"!=o[a]&&"la"!=o[a]&&"los"!=o[a]&&"las"!=o[a]||o[a].splice(a,1);for(var c=0;c<o.length;c++)for(var l=0;l<this.config.layerList.length;l++)if("Select"==this.config.provinciaSeleccionada||"Todas"==this.config.provinciaSeleccionada||this.config.provinciaSeleccionada==this.config.layerList[l].getImpl().name)for(var r=0;r<this.config.layerList[l].getFeatures().length;r++){var u=this.config.layerList[l].getFeatures()[r].getImpl().getAttribute("nombre");(u=this.quitaAcentos(u)).includes(o[c])&&(this.config.result[2*this.config.reg]=this.config.layerList[l].getFeatures()[r].getImpl().getAttribute("nombre"),this.config.result[2*this.config.reg+1]=this.config.layerList[l].getImpl().name,this.config.reg=this.config.reg+1,i=!0)}this.config.pag=0,this.config.numeroTablas=parseInt(this.config.reg/this.config.num_results)+1,this.creaTabla(),this.config.reg>this.config.num_results&&(document.getElementById("controlTablas").style.display="flex",document.getElementById("botonAvance").style.display="flex",document.getElementById("botonAtras").style.display="none"),0==i&&(document.getElementById("DivTablaResultados").style.display="none",document.getElementById("resultadosBusqueda").style.display="block",document.getElementById("paginado").style.display="none","Todas"!=this.config.provinciaSeleccionada&&"Select"!=this.config.provinciaSeleccionada?document.getElementById("resulBus").innerHTML='"'+t+'" no muestra ningún resultado en la lista de municipios de '+this.config.provinciaSeleccionada:document.getElementById("resulBus").innerHTML='"'+t+'" no muestra ningún resultado en la lista de municipios')}},{key:"borraTablas",value:function(){document.getElementById("TablaResultados").innerHTML="<thead><tr><td>MUNICIPIO</td><td>PROVINCIA</td></tr></thead><tbody></tbody>",document.getElementById("TablaResultados").className="TablaOculta"}},{key:"quitaAcentos",value:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("á","a")).replace("é","e")).replace("í","i")).replace("ó","o")).replace("ú","u")).replace("Á","A")).replace("É","E")).replace("Í","I")).replace("Ó","O")).replace("Ú","U")}},{key:"creaTabla",value:function(){for(var e=this.config.pag*this.config.num_results;e<this.config.pag*this.config.num_results+this.config.num_results;e++)e<this.config.reg&&(document.getElementById("TablaResultados").getElementsByTagName("tbody")[0].insertRow(-1).innerHTML="<tr><th>"+this.config.result[2*e]+"</th><th>"+this.config.result[2*e+1]+"</th></tr>");document.getElementById("TablaResultados").className="TablaResultados",document.getElementById("paginado").style.display="block",this.config.pag*this.config.num_results+this.config.num_results<this.config.reg?document.getElementById("paginado").innerHTML="Resultados "+(this.config.pag*this.config.num_results+1)+" a "+(this.config.pag*this.config.num_results+this.config.num_results)+" de "+this.config.reg:document.getElementById("paginado").innerHTML="Resultados "+(this.config.pag*this.config.num_results+1)+" a "+this.config.reg+" de "+this.config.reg}},{key:"retrocedeTabla",value:function(){this.config.pag>0&&(this.config.pag=this.config.pag-1,this.borraTablas(),this.creaTabla()),0==this.config.pag&&(document.getElementById("botonAtras").style.display="none"),this.config.pag==this.config.numeroTablas-2&&(document.getElementById("botonAvance").style.display="flex")}},{key:"avanzaTabla",value:function(){this.config.pag<this.config.numeroTablas-1&&(this.config.pag=this.config.pag+1,this.borraTablas(),this.creaTabla()),this.config.pag==this.config.numeroTablas-1&&(document.getElementById("botonAvance").style.display="none"),1==this.config.pag&&(document.getElementById("botonAtras").style.display="flex")}},{key:"limpia",value:function(){document.getElementById("busMuni").value="",document.getElementById("divBotones").style.display="none",document.getElementById("resultadosBusqueda").style.display="none",document.getElementById("controlTablas").style.display="none",document.getElementById("resulBus").innerHTML="",document.getElementById("selectMunicipios").options.item(0).selected="selected",document.getElementById("paginado").style.display="none",this.map_.getPopup()&&this.map_.removePopup(),0!=this.config.munAnterior&&this.config.munAnterior.setStyle(this.config.stAnterior),this.borraTablas();var e=this.map_.getLayers().length-9;if("Select"!=this.config.provinciaSeleccionada&&"Todas"!=this.config.provinciaSeleccionada&&this.map_.getLayers().length>9)for(var t=0;t<e;t++){var i=this.map_.getLayers()[8];this.config.provinciaSeleccionada!=i.impl_.name&&this.map_.removeLayers(i)}this.config.pag=0,this.config.reg=0,this.config.result=[]}},{key:"normalizaMunicipio",value:function(e){for(var t=0;t<e.length;t++)-1!==e[t].indexOf("(El)")&&(e[t]="El "+e[t].slice(0,e[t].indexOf(" (El)"))),-1!==e[t].indexOf("(Los)")&&(e[t]="Los "+e[t].slice(0,e[t].indexOf(" (Los)"))),-1!==e[t].indexOf("(La)")&&(e[t]="La "+e[t].slice(0,e[t].indexOf(" (La)"))),-1!==e[t].indexOf("(Las)")&&(e[t]="Las "+e[t].slice(0,e[t].indexOf(" (Las)"))),-1!==e[t].indexOf("(capital)")&&(e[t]=e[t].slice(0,e[t].indexOf(" (capital)")));return e}},{key:"consultaPoblacion",value:function(e){var t=this;this.config.status.stPoblacion=!1;var i=new XMLHttpRequest;if(i.open("GET","https://www.ieca.junta-andalucia.es/intranet/admin/rest/v1.0/consulta/6780"),i.responseType="json",i.send(),""==this.config.status.PoblacionJson)i.onload=function(){t.config.status.PoblacionJson=i.response,t.listPoblacion=[];for(var o=0,n=0;n<t.config.status.PoblacionJson.data.length;n++)t.config.status.PoblacionJson.data[n][1].des==e&&(t.config.listPoblacion[2*o]=t.config.status.PoblacionJson.data[n][0].des,t.config.listPoblacion[2*o+1]=t.config.status.PoblacionJson.data[n][3].format,o+=1);t.config.listPoblacion=t.normalizaMunicipio(t.config.listPoblacion),200==i.status&&(document.getElementById("selectSexoAfiliacion").style.marginBottom="27px",document.getElementById("controlCarga").style.display="none","Poblacion"==document.getElementById("selectRepresentacion").value&&t.representaPoblacion(),t.config.status.stPoblacion=!0),i.abort()};else{this.listPoblacion=[];for(var o=0,n=0;n<this.config.status.PoblacionJson.data.length;n++)this.config.status.PoblacionJson.data[n][1].des==e&&(this.config.listPoblacion[2*o]=this.config.status.PoblacionJson.data[n][0].des,this.config.listPoblacion[2*o+1]=this.config.status.PoblacionJson.data[n][3].format,o+=1);this.config.listPoblacion=this.normalizaMunicipio(this.config.listPoblacion),"Poblacion"==document.getElementById("selectRepresentacion").value&&this.representaPoblacion(),this.config.status.stPoblacion=!0}}},{key:"consultaSuperavit",value:function(){var e=this;this.config.status.stSuperavit=!1;var t=new XMLHttpRequest;t.open("GET","https://www.ieca.junta-andalucia.es/intranet/admin/rest/v1.0/consulta/1342"),t.responseType="json",t.send(),t.onload=function(){e.config.status.SuperavitJson=t.response;for(var i=0;i<e.config.status.SuperavitJson.data.length;i++)e.config.listSuperavit[2*i]=e.config.status.SuperavitJson.data[i][0].des,e.config.listSuperavit[2*i+1]=parseFloat(e.config.status.SuperavitJson.data[i][2].val).toFixed(2);e.config.listSuperavit=e.normalizaMunicipio(e.config.listSuperavit),200==t.status&&(document.getElementById("selectSexoAfiliacion").style.marginBottom="27px",document.getElementById("controlCarga").style.display="none","Deficit_Superavit"==document.getElementById("selectRepresentacion").value&&e.representaSuperavit(),e.config.status.stSuperavit=!0),t.abort()}}},{key:"consultaSegSocial",value:function(e,t){var i=this;this.config.status.stSegsocial=!1;var o=new XMLHttpRequest;if(o.open("GET","https://www.ieca.junta-andalucia.es/intranet/admin/rest/v1.0/consulta/49400"),o.responseType="json",o.send(),""==this.config.status.SegsocialJson)o.onload=function(){i.config.status.SegsocialJson=o.response;var n=0;if(i.config.ssYear=i.config.status.SegsocialJson.data[0][3].des,document.getElementById("tituloSS").innerHTML="Afiliación Seg. Social "+i.config.ssYear,"Ambos sexos disgregados"!=t)for(var s=0;s<i.config.status.SegsocialJson.data.length;s++)i.config.status.SegsocialJson.data[s][1].des==e&&i.config.status.SegsocialJson.data[s][2].des==t&&(i.config.listSegsocial[2*n]=i.config.status.SegsocialJson.data[s][0].des,"*"!=i.config.status.SegsocialJson.data[s][4].format&&""!=i.config.status.SegsocialJson.data[s][4].format&&(i.config.listSegsocial[2*n+1]=i.config.status.SegsocialJson.data[s][4].format),"*"==i.config.status.SegsocialJson.data[s][4].format&&(i.config.listSegsocial[2*n+1]="< 5"),""==i.config.status.SegsocialJson.data[s][4].format&&(i.config.listSegsocial[2*n+1]="---"),n+=1);if("Ambos sexos disgregados"==t){n=0;for(var a=0;a<i.config.status.SegsocialJson.data.length;a++)i.config.status.SegsocialJson.data[a][1].des==e&&"Hombres"==i.config.status.SegsocialJson.data[a][2].des&&(i.config.listSegsocial[n]=i.config.status.SegsocialJson.data[a][0].des,n+=1,i.config.listSegsocial[n]=i.config.status.SegsocialJson.data[a][4].format,"*"==i.config.listSegsocial[n]&&(i.config.listSegsocial[n]="< 5"),""==i.config.listSegsocial[n]&&(i.config.listSegsocial[n]="---"),n+=1,i.config.listSegsocial[n]=i.config.status.SegsocialJson.data[a+1][4].format,"*"==i.config.listSegsocial[n]&&(i.config.listSegsocial[n]="< 5"),""==i.config.listSegsocial[n]&&(i.config.listSegsocial[n]="---"),n+=1,i.config.listSegsocial[n]=i.config.status.SegsocialJson.data[a+2][4].format,"*"==i.config.listSegsocial[n]&&(i.config.listSegsocial[n]="< 5"),""==i.config.listSegsocial[n]&&(i.config.listSegsocial[n]="---"),n+=1)}i.config.listSegsocial=i.normalizaMunicipio(i.config.listSegsocial),200==o.status&&(document.getElementById("selectSexoAfiliacion").style.marginBottom="27px",document.getElementById("controlCarga").style.display="none","Afiliacion"==document.getElementById("selectRepresentacion").value&&i.representaSegSocial(),i.config.status.stSegsocial=!0),o.abort()};else{var n=0;if(this.config.ssYear=this.config.status.SegsocialJson.data[0][3].des,document.getElementById("tituloSS").innerHTML="Afiliación Seg. Social "+this.config.ssYear,"Ambos sexos disgregados"!=t)for(var s=0;s<this.config.status.SegsocialJson.data.length;s++)this.config.status.SegsocialJson.data[s][1].des==e&&this.config.status.SegsocialJson.data[s][2].des==t&&(this.config.listSegsocial[2*n]=this.config.status.SegsocialJson.data[s][0].des,"*"!=this.config.status.SegsocialJson.data[s][4].format&&""!=this.config.status.SegsocialJson.data[s][4].format&&(this.config.listSegsocial[2*n+1]=this.config.status.SegsocialJson.data[s][4].format),"*"==this.config.status.SegsocialJson.data[s][4].format&&(this.config.listSegsocial[2*n+1]="< 5"),""==this.config.status.SegsocialJson.data[s][4].format&&(this.config.listSegsocial[2*n+1]="---"),n+=1);if("Ambos sexos disgregados"==t){n=0;for(var a=0;a<this.config.status.SegsocialJson.data.length;a++)this.config.status.SegsocialJson.data[a][1].des==e&&"Hombres"==this.config.status.SegsocialJson.data[a][2].des&&(this.config.listSegsocial[n]=this.config.status.SegsocialJson.data[a][0].des,n+=1,this.config.listSegsocial[n]=this.config.status.SegsocialJson.data[a][4].format,"*"==this.config.listSegsocial[n]&&(this.config.listSegsocial[n]="< 5"),""==this.config.listSegsocial[n]&&(this.config.listSegsocial[n]="---"),n+=1,this.config.listSegsocial[n]=this.config.status.SegsocialJson.data[a+1][4].format,"*"==this.config.listSegsocial[n]&&(this.config.listSegsocial[n]="< 5"),""==this.config.listSegsocial[n]&&(this.config.listSegsocial[n]="---"),n+=1,this.config.listSegsocial[n]=this.config.status.SegsocialJson.data[a+2][4].format,"*"==this.config.listSegsocial[n]&&(this.config.listSegsocial[n]="< 5"),""==this.config.listSegsocial[n]&&(this.config.listSegsocial[n]="---"),n+=1)}this.config.listSegsocial=this.normalizaMunicipio(this.config.listSegsocial),"Afiliacion"==document.getElementById("selectRepresentacion").value&&this.representaSegSocial(),this.config.status.stSegsocial=!0}}},{key:"representaPoblacion",value:function(){for(var e=0;e<this.config.layerList.length;e++)for(var t=0;t<this.config.layerList[e].getFeatures().length;t++){this.config.layerList[e].getFeatures()[t].setStyle(this.config.pobList.pob_1000);for(var i=0;i<this.config.listPoblacion.length;i+=2)if(this.config.layerList[e].getFeatures()[t].getAttribute("nombre")==this.config.listPoblacion[i]){var o=Number(this.config.listPoblacion[i+1].replace(".",""));o<=1e3&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.pobList.pob_1000),o>1e3&&o<=5e3&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.pobList.pob_1000_5000),o>5e3&&o<=1e4&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.pobList.pob_5000_10000),o>1e4&&o<=5e4&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.pobList.pob_10000_50000),o>5e4&&o<=1e5&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.pobList.pob_50000_100000),o>1e5&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.pobList.pob100000_)}}document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls>div#leyenda-title")[0].innerHTML="Población por municipios año "+this.config.pobYear,document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls>div.leyenda")[0].innerHTML='<img src="../../../leyendas/poblacion.png" alt="Leyenda Poblacion" title ="Leyenda Población" >'}},{key:"representaSuperavit",value:function(){for(var e=0;e<this.config.layerList.length;e++)for(var t=0;t<this.config.layerList[e].getFeatures().length;t++){this.config.layerList[e].getFeatures()[t].setStyle(this.config.supList.sup_sin_dato);for(var i=0;i<this.config.listSuperavit.length;i+=2)if(this.config.layerList[e].getFeatures()[t].getAttribute("nombre")==this.config.listSuperavit[i]){var o=Number(this.config.listSuperavit[i+1]);o>=0&&o<=5e5&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.supList.sup0_05),o>5e5&&o<=1e6&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.supList.sup05_1),o>1e6&&o<=5e6&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.supList.sup1_5),o>5e6&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.supList.sup5_),o<0&&o>=-5e5&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.supList.def0_05),o<-5e5&&o>=-1e6&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.supList.def05_1),o<-1e6&&o>=-5e6&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.supList.def1_5),o<-5e6&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.supList.def5_)}}document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls>div#leyenda-title")[0].innerHTML="Superávit/Déficit del último ejercicio",document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls>div.leyenda")[0].innerHTML='<img src="../../../leyendas/deficit_superavit.png" alt="Leyenda Déficit/Superávit" title ="Leyenda Déficit/Superávit" >'}},{key:"representaSegSocial",value:function(){for(var e=0;e<this.config.layerList.length;e++)for(var t=0;t<this.config.layerList[e].getFeatures().length;t++)if(this.config.layerList[e].getFeatures()[t].setStyle(this.config.afiList.afi_sin_dato),"Ambos sexos disgregados"!=this.config.ssSexo){for(var i=0;i<this.config.listSegsocial.length;i+=2)if(this.config.layerList[e].getFeatures()[t].getAttribute("nombre")==this.config.listSegsocial[i]){var o=0;"< 5"!=this.config.listSegsocial[i+1]&&(o=Number(this.config.listSegsocial[i+1].replace(".",""))),o>=0&&o<=100&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.afiList.afi0_100),o>100&&o<=1e3&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.afiList.afi100_1000),o>1e3&&o<=5e3&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.afiList.afi1000_5000),o>5e3&&o<=1e4&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.afiList.afi5000_10000),o>1e4&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.afiList.afi10000_)}}else for(var n=0;n<this.config.listSegsocial.length;n+=4)if(this.config.layerList[e].getFeatures()[t].getAttribute("nombre")==this.config.listSegsocial[n]){var s=0;"< 5"!=this.config.listSegsocial[n+3]&&(s=Number(this.config.listSegsocial[n+3].replace(".",""))),s>=0&&s<=100&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.afiList.afi0_100),s>100&&s<=1e3&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.afiList.afi100_1000),s>1e3&&s<=5e3&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.afiList.afi1000_5000),s>5e3&&s<=1e4&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.afiList.afi5000_10000),s>1e4&&this.config.layerList[e].getFeatures()[t].setStyle(this.config.afiList.afi10000_)}var a="";a="Ambos sexos disgregados"!=this.config.ssSexo&&"Ambos sexos"!=this.config.ssSexo?this.config.ssSexo+" afiliados al "+this.config.ssRegimen.replace("*","")+" en "+this.config.ssYear:"Total afiliados al "+this.config.ssRegimen.replace("*","")+" en "+this.config.ssYear,document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls>div#leyenda-title")[0].innerHTML=a,document.querySelectorAll("div.m-panel.m-leyenda>div.m-panel-controls>div.leyenda")[0].innerHTML='<img src="../../../leyendas/segsocial.png" alt="Leyenda Afiliados '+this.config.ssRegimen+" año "+this.config.ssYear+'" title ="Leyenda Afiliados '+this.config.ssRegimen+" año "+this.config.ssYear+'" >'}}])&&m(t.prototype,i),o&&m(t,o),s}(),A=i(1);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=I(e);if(t){var n=I(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return x(this,i)}}function x(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(s,M.Plugin);var t,i,o,n=B(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=n.call(this)).map_=null,t.config=e,t.controls_=[],t.metadata_=A.metadata,t}return t=s,(i=[{key:"addTo",value:function(e){this.controls_.push(new P(this.config)),this.controls_.push(this.control_),this.map_=e,this.panel_=new M.ui.Panel("panelMunpanel",{collapsible:!0,className:"m-munpanel",position:M.ui.position.TR,collapsedButtonClass:"g-cartografia-prismaticos"}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_);var t=new M.ui.Panel("legend",{collapsible:!0,className:"m-leyenda",collapsedButtonClass:"g-cartografia-capas2",position:M.ui.position.TR});e.addPanels([t])}},{key:"getMetadata",value:function(){return this.metadata_}}])&&_(t.prototype,i),o&&_(t,o),s}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.Munpanel=T,window.M.control.MunpanelControl=P,window.M.impl.control.MunpanelControl=g}]);
//# sourceMappingURL=munpanel.ol.min.js.map